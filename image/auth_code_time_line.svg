<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="557px" preserveAspectRatio="none" style="width:972px;height:557px;background:#FFFFFF;" version="1.1" viewBox="0 0 972 557" width="972px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="275.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="17" y="183.6953"/><rect fill="#FFFFFF" height="92.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="151" y="91.2969"/><rect fill="#FFFFFF" height="246.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="151" y="212.8281"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="266" y="271.0938"/><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="633" y="112.4297"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="633" y="241.9609"/><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="633" y="300.2266"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="633" y="400.625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="22" x2="22" y1="81.2969" y2="476.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="156" x2="156" y1="81.2969" y2="476.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="271" x2="271" y1="81.2969" y2="476.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="638" x2="638" y1="81.2969" y2="476.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="5" y="77.9951">用户</text><ellipse cx="22" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22,21.5 L22,48.5 M9,29.5 L35,29.5 M22,48.5 L9,63.5 M22,48.5 L35,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="5" y="488.8857">用户</text><ellipse cx="22" cy="500.6875" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22,508.6875 L22,535.6875 M9,516.6875 L35,516.6875 M22,535.6875 L9,550.6875 M22,535.6875 L35,550.6875 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="128" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="135" y="69.9951">客户端</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="128" y="475.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="135" y="495.8857">客户端</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="194" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="201" y="69.9951">用户代理（授权界面）</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="194" y="475.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="201" y="495.8857">用户代理（授权界面）</text><rect fill="#FFA500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="596" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="603" y="69.9951">认证服务器</text><rect fill="#FFA500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="596" y="475.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="603" y="495.8857">认证服务器</text><rect fill="#FFFFFF" height="275.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="17" y="183.6953"/><rect fill="#FFFFFF" height="92.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="151" y="91.2969"/><rect fill="#FFFFFF" height="246.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="151" y="212.8281"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="266" y="271.0938"/><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="633" y="112.4297"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="633" y="241.9609"/><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="633" y="300.2266"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="633" y="400.625"/><polygon fill="#181818" points="621,108.4297,631,112.4297,621,116.4297,625,112.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="161" x2="627" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="168" y="107.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="181" y="107.3638">注册客户端信息</text><line style="stroke:#181818;stroke-width:1.0;" x1="643" x2="685" y1="141.5625" y2="141.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="685" x2="685" y1="141.5625" y2="154.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="644" x2="685" y1="154.5625" y2="154.5625"/><polygon fill="#181818" points="654,150.5625,644,154.5625,654,158.5625,650,154.5625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="650" y="136.4966">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="302" x="663" y="136.4966">存储客户端信息，例如：client_id、client_secret等</text><polygon fill="#181818" points="167,179.6953,157,183.6953,167,187.6953,163,183.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="161" x2="637" y1="183.6953" y2="183.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="173" y="178.6294">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="186" y="178.6294">存储客户端信息成功</text><polygon fill="#181818" points="139,208.8281,149,212.8281,139,216.8281,143,212.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="27" x2="145" y1="212.8281" y2="212.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="34" y="207.7622">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="47" y="207.7622">发起登录</text><polygon fill="#181818" points="621,237.9609,631,241.9609,621,245.9609,625,241.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="161" x2="627" y1="241.9609" y2="241.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="168" y="236.895">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306" x="181" y="236.895">向认证服务器发起认证授权请求，grant_type=code</text><polygon fill="#181818" points="287,267.0938,277,271.0938,287,275.0938,283,271.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="281" x2="637" y1="271.0938" y2="271.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="293" y="266.0278">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="306" y="266.0278">带上客户端参数，将操作引导至用户授权确认页面</text><polygon fill="#181818" points="621,296.2266,631,300.2266,621,304.2266,625,300.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="271" x2="627" y1="300.2266" y2="300.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="278" y="295.1606">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="325" x="291" y="295.1606">带上客户端参数和用户授权范围向认证服务器获取授权码</text><line style="stroke:#181818;stroke-width:1.0;" x1="643" x2="685" y1="329.3594" y2="329.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="685" x2="685" y1="329.3594" y2="342.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="644" x2="685" y1="342.3594" y2="342.3594"/><polygon fill="#181818" points="654,338.3594,644,342.3594,654,346.3594,650,342.3594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="650" y="324.2935">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="663" y="324.2935">校验客户端信息和授权范围</text><polygon fill="#181818" points="172,367.4922,162,371.4922,172,375.4922,168,371.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="166" x2="637" y1="371.4922" y2="371.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="178" y="366.4263">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="191" y="366.4263">将授权码拼接到客户端注册的回调地址返回给客户端</text><polygon fill="#181818" points="621,396.625,631,400.625,621,404.625,625,400.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="161" x2="627" y1="400.625" y2="400.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="168" y="395.5591">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="309" x="190" y="395.5591">客户端拿到授权码后向认证服务器换取令牌（token）</text><polygon fill="#181818" points="172,425.7578,162,429.7578,172,433.7578,168,429.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="166" x2="637" y1="429.7578" y2="429.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="178" y="424.6919">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="200" y="424.6919">返回令牌（token）</text><polygon fill="#181818" points="33,454.8906,23,458.8906,33,462.8906,29,458.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="27" x2="155" y1="458.8906" y2="458.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="39" y="453.8247">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="61" y="453.8247">显示登录成功</text></g></svg>